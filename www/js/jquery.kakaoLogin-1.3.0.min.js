/*!
 * kakaoLogin - jquery kakao login plugin
 *
 * Version:  1.3.0
 * Download :
 * 	https://accounts.kakao.com/js/weblogin/releases/jquery.kakaoLogin-1.3.0.min.js
 *  https://accounts.kakao.com/js/weblogin/releases/jquery.kakaoLogin-1.3.0.js
 * Author:   diane, jesse.q
 *
 */
var kakao=kakao||{};kakao.weblogin=kakao.weblogin||{};kakao.weblogin.version="1.3.0";kakao.weblogin.messages={en:{error:"An unexpected error has occurred.\nThe error might have been caused by temporary errors in the server or in the network connection.\nThe Kakao Team is currently identifying and solving the problem.",invalid_access:"Invalid access. Please try again.",invalid_email:"Email address or password is not in the correct format.",invalid_password:"Password is not in the correct format."},ko:{error:"�삁�긽�븯吏� 紐삵븳 �삤瑜섍? 諛쒖깮�뻽�뒿�땲�떎.\n�꽌踰꾩쓽 �씪�떆�쟻�씤 �옣�븷�씠嫄곕굹 �꽕�듃�썙�겕 臾몄젣�씪 �닔 �엳�뒿�땲�떎.\n�빐�떦 �삤瑜섎뒗 移댁뭅�삤�?�뿉�꽌 �솗�씤 諛� �?�쓳 以묒엯�땲�떎.",invalid_access:"�젙�긽�쟻�씤 �젒洹쇱씠 �븘�떃�땲�떎. 寃쎈줈瑜� �솗�씤�빐 二쇱꽭�슂.",invalid_email:"移댁뭅�삤怨꾩젙 �씠硫붿씪 �삎�떇�씠 �삱諛붾Ⅴ吏� �븡�뒿�땲�떎.",invalid_password:"鍮꾨?踰덊샇 �삎�떇�씠 �삱諛붾Ⅴ吏� �븡�뒿�땲�떎.\n(4~16�옄由� �닽�옄/湲고샇/�?�냼臾몄옄 媛��뒫, 怨듬갚 遺덇?)"},ja:{error:"雅덃쐿�걮�겒�걚�궓�꺀�꺖�걣�쇇�뵟�걮�겲�걮�걼��?n�궢�꺖�깘�꺖�겗訝��셽�쉪�겒�슌若녈겲�걼�겘�깓�긿�깉�꺈�꺖�궚�겗�븦窈뚣겎�걗�굥�졃�릦�걣�걗�굤�겲�걲��귟㈁壤볝궓�꺀�꺖�겘�궖�궖�궕�긽�꺖�깲�겎閻븃첀�걮�겍�걡�굤��곩?恙쒍릎�겎�걲���",invalid_access:"閭ｅ만�겒�궋�궚�궩�궧�겎�겘�걗�굤�겲�걵�굯��귙굚�걝訝�佯╉걡屋╉걮�걦�걽�걬�걚���",invalid_email:"E�깳�꺖�꺂�궋�깋�꺃�궧�겲�걼�겘�깙�궧�꺈�꺖�깋�겗壤℡폀�걣閭ｃ걮�걦�걗�굤�겲�걵�굯���",invalid_password:"�깙�궧�꺈�꺖�깋�겗壤℡폀�걣閭ｃ걮�걦�걗�굤�겲�걵�굯���"}};kakao.weblogin.utils={getDoc:function(d){var c=null;var a=function(e){window.console&&console.log(e)};try{if(d.contentWindow){c=d.contentWindow.document}}catch(b){a("cannot get iframe.contentWindow document: "+b)}if(c){return c}try{c=d.contentDocument?d.contentDocument:d.document}catch(b){a("cannot get iframe.contentDocument: "+b);c=d.document}return c},parse:function(g){var a={};if(g.charAt(0)==="?"){g=g.substr(1)}var h=g.split("&");for(var c in h){var d=decodeURIComponent(h[c]);var f=d.indexOf("=");if(f===-1){continue}var b=d.substr(0,f);var e=d.substr(f+1);a[b]=e}return a},createIframe:function(a,b){return $('<iframe name="'+a+'" src="about:blank" />').css({position:"absolute",top:"-1000px",left:"-1000px"}).appendTo("body").load(b)[0]},getAccountsDomain:function(a){var b=function(e,d){return e.indexOf(d,e.length-d.length)!==-1};var c=".kakao.com";if(b(window.location.host,".kakaocorp.cn")){c=".kakaocorp.cn"}return(a?a+"-":"")+"accounts"+c},defaultCallBack:function(b,a){var c;var f=kakao.weblogin.utils.getDoc(a);if(!f||f.location.href=="about:blank"){return}try{c=kakao.weblogin.utils.parse(f.location.search)||{};if(c.status!=0&&!c.message){c.message=_messages.error}b.done(c)}catch(d){b.fail(d,d.message)}finally{b.always();$(a).remove()}}};(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(window.jQuery)}}(function(b){var c=function(d){return !d||!d.length||/^\s*$/.test(d)};var a=function(d){return(d||"").replace(/^\s+|\s+$/g,"")};b.fn.verifyEmailPassword=function(m,k){var e,j;j=this;var d="_ifr_venp";var f=jQuery.extend({url:"https://"+(k?k+"-":"")+"accounts.kakao.com/weblogin/verify_email_password",locale:"ko",before:function(){return true},done:function(n){},fail:function(o,n){alert(n||g.error)},always:function(){}},m);var g=kakao.weblogin.messages[f.locale];var l=function(){kakao.weblogin.utils.defaultCallBack(f,e)};var i=function(){var p=/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/i;var o=j.find("input[name=password]");var n=j.find("input[name=email]");if(c(n.val())||!n.val(a(n.val())).val().match(p)){f.fail("",g.invalid_email);return false}if(o.val().length<4){f.fail("",g.invalid_password);return false}return true};var h=function(){if(!i()&&!f.before()){f.always();return false}e=kakao.weblogin.utils.createIframe(d,l);j.attr("action",f.url);j.attr("target",e.name);j.attr("method","POST");return true};j.submit(function(n){return h(n)});return j};b.fn.verifyPassword=function(l,j){var e,i;var d="ifr_vp";i=this;var f=jQuery.extend({url:"https://"+kakao.weblogin.utils.getAccountsDomain(j)+"/weblogin/verify_password",locale:"ko",before:function(){return true},done:function(m){},fail:function(n,m){alert(g.error)},always:function(){}},l);var g=kakao.weblogin.messages[f.locale];var k=function(){kakao.weblogin.utils.defaultCallBack(f,e)};var h=function(){if(!f.before()){f.always();return false}e=kakao.weblogin.utils.createIframe(d,k);i.attr("action",f.url);i.attr("target",e.name);i.attr("method","POST");return true};i.submit(function(m){return h(m)});return i};b.fn.kakaoLogin=function(p,n){var m,g,i,j,d=false,e=null;_iframe_name="_ifr_kilo";var f=function(){var q=(typeof g.password==="string");return q?m.find(g.password):g.password};var o=function(){if(!g.callback_url){document.domain="kakao.com"}var s;var v=kakao.weblogin.utils.getDoc(e);if(!v||v.location.href=="about:blank"){return}try{if(g.callback_url){s=kakao.weblogin.utils.parse(v.location.search)}else{var r=v.body?v.body:v.documentElement;responseText=r?r.innerHTML:null;var s=b.parseJSON(responseText.trim())}if(s.status==-481){location.href=g.url_captcha+"?continue="+encodeURIComponent(g.continue_url);return}else{if(s.status==-488){var q=b('<form style="display: none;"></form>');q.attr("method","post");
q.attr("action",g.url_dormant+"?continue="+encodeURIComponent(g.continue_url));var u={email:g.email.val(),password:f().val()};u["continue"]=g.continue_url;b.each(u,function(w,x){var y=b("<input></input>");y.attr("type","hidden");y.attr("name",w);y.attr("value",x);q.append(y)});b(document.body).append(q);q.submit();return}}g.done(s)}catch(t){g.fail(t,t.message)}finally{h()}};var h=function(){g.always();if(e){b(e).remove()}d=false;f().val("")};var l=function(q){if(!g.login()||!k()){h();return false}e=kakao.weblogin.utils.createIframe("_ifr_kilo",o);m.attr("action",g.url);m.attr("target",e.name);m.attr("method","POST");if(g.callback_url){g.el_cb_url.val(g.callback_url)}return true};var k=function(){for(var q in j){if(!j[q]()){return false}}return true};m=this;var g=jQuery.extend({el_cb_url:b('<input type="hidden" name="callback_url" />'),el_script_version:b('<input type="hidden" name="scriptVersion" value="'+kakao.weblogin.version+'"/>'),locale:"ko",email:m.find('input[name="email"]'),password:'input[name="password"]',continue_url:m.find('input[name="continue"]').val(),remember:m.find('input[name="remember"]'),url:"https://"+kakao.weblogin.utils.getAccountsDomain(n)+"/weblogin/authenticate",url_captcha:"https://"+kakao.weblogin.utils.getAccountsDomain(n)+"/weblogin/main_captcha",url_dormant:"https://"+kakao.weblogin.utils.getAccountsDomain(n)+"/weblogin/dormant_account",done:function(q){if(q.status==0){location.href=g.continue_url}else{g.error(q.message)}},fail:function(r,q){alert(i.error)},always:function(){},error:function(q){alert(q)},login:function(){return true}},p);var i=kakao.weblogin.messages[g.locale];var j=[(function(){var r=/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/i;var q=f().val();if(c(g.email.val())||!g.email.val(a(g.email.val())).val().match(r)){g.error(i.invalid_email);return false}if(q.length<4){g.error(i.invalid_password);return false}if(g.continue_url.indexOf("kakao.com")==-1&&g.continue_url.indexOf("kakaocorp.cn")==-1){g.error(i.invalid_access);return false}return true})];m.submit(function(q){if(!d){d=true;return l(q)}return false});return(function(){if(g.callback_url){m.append(g.el_cb_url)}m.append(g.el_script_version);if(g.validator){j.push(g.validator)}return m})()}}));
